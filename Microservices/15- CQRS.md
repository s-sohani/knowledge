کلا میگه که دو نوع الگو متفاوت داریم یکی خواندن و دیگری نوشتن. 
ولی ساخت دو مدل یکی برای خوندن و یکی برای نوشتن باعث میشه دو مدل داشته باشیم و اپلیکیشن رو سنگین میکنه. یک مدل دامنه برای خوندن و یک مدل دامنه و برای نوشتن. کلا CQRS یک فرهنگ است که از پایین ترین لایه تا بالاترین لایه حتی UI باید رعایتش کنه و همه لایه ها رو تحت تاثیر قرار میده. 

اگر یک مدل داشته باشیم چه ایرادی اتفاق میفته. فرض کنید من یک مدل دامنه rich داریم که تخصصش رعایت کردن domain logic و invariant های من است و برای فرآیند transactional مناسب سازی شده. بیشتر برای نوشتن اینطوری پیاده سازی شده ولی نوشتن چی؟
ممکنه بخوایم همه داده ها رو یک جا بکشیم بیرون. این ریپازیتوری رو کجا پیاده سازی کنیم؟تو کدوم ماژول؟ چند aggregate بخوایم بکشیم بیرون و یک view بدیم بیرون چی؟
خیلی وقت ها تمرکز رو میذاریم روی نوشتن و خوندنمون خیلی ضد الگو و کثیف میشه و یا برعکس تمرکز رو میذاریم رو خوندن و نوشتن تبدیل به ضد الگو میشه و خیلی بد میشه. 
پس بهتره فرآیند رو اصلاح کنیم و مدل خوندن و نوشتن رو عوض کنیم. 

راهکار بهتر اینه که کلا خواندن و نوشتن رو جدا کنیم به جای اینکه کلا هر دوشون بیان توی اپلیکیشن سرویس و از مدل دامنه استفاده کنند بیایم نوشتن رو همین طوری ببریم جلو ولی خوندن رو کلا از یک فرآیند دیگه ببریم جلو. 

اولین مدلی که باید بسازیم commad model هست که باید یک سری دستور رو از بیرون بگیره و اجرا بکنه و نتیجه رو بده بیرون. برای انجام این دستورات نیاز به یک سری اطلاعات داریم. پس کلاس command من یک DTO هست و اطلاعاتی که دستوری که میخوایم اجرا کنیم رو توی این میذاریم. در نهایت commad یک handler داره که میاد اون کامند رو اجرا میکنه. 

در کنار این نیاز داریم query هم بگیریم. باز برای کوئری یک کلاس DTO داریم که میایم اطلاعات مورد نیاز رو بهش بدیم و یک Handler داره که میاد اطلاعات رو اماده میکنه و نتیجه رو میده به کاربر. خیلی وقت ها ممکنه نیاز مندی خاصی داشته باشیم که اگر بخوایم خوندن رو از مدل نوشتن استفاده کنیم کار رو پیچیده بکنه. برای راه حل ممکنه برای خوندن بریم سمت materilize view. راه حل های دیگه هست مثلا ممکنه دیتابیس master slave  باشه که خوندن رو از Slave بخونه یا کلا یه ETL داشته باشیم که بعد از تمیز شدن داده خوندن رو داشته باشیم. خلاصه راهکار های زیادی هست که از یه طریق دیگه بتونه به صورت بهینه کار خوندن رو انجام بدیم. 

پس کلا CQRS یعنی خوندن و از نوشتن جدا کنیم که این جدا کردنه میتونه از لایه بالا اتفاق بیفته و تا پایین ترین لایه تفکیک بشه

اشتباهات رایج برای پیاده سازی:
1- پیاده سازی به صورت رویایی و ایدعال ممکنه سخت باشه. اینکه حتما دو دیتابیس جدا داشته باشیم و از یکی بخونیم و به یکی بنویسیم. 
2- پیاده سازی eventual consistency که خیلی کم باشه این تایم خیلی ممکنه سخت باشه
3- حتما لازم نیست event sourcing استفاده کنیم
3- حتما لازم نیست async باشیم
4- لزومی نداره حتما domain domain داشته باشیم. 

استفاده از CQRS باعث میشه اپلیکیشن scalable بشه ولی این رو باید بپذیریم که موقع خوندن eventual consistency خواهیم داشت. 

