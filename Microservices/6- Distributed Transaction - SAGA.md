در محیط های مونولیتیک مدیریت تراکنش توسط دیتابیس مدیریت میشه ولی در محیط های توزیع شده خودمون باید این رو انجام بدیم که چالش هایی داره 

اعمالی که یا همشون باید انجام شود یا اگر یکیش fail شد همه باید Fail شوند. 
وقتی یکی از سرویس ها یکی از کار ها رو نتونست انجام بده کل فرآیند باید fail شود. 

یکی از روش ها که ساده هست ولی معایب زیادی داره Distributed transaction هست 
یکی دیگه از روش ها جهت رسیدن به ACD الگوی SAGA هست که فقط I یا Isolation رو نداره که باید برای این هم راه کار داشته باشیم 

روش Distributed Transation
در این روش میایم از کامیت دو مرحله ای استفاده میکنیم به این صورت که یک آی دی برای تراکنش در نظر میگیریم. تراکنش هایی که هر سرویس باید انجام بده از طرف Transaction Manager ارسال میشه. بعد از اینکه هر سرویس کار مربوط به خودش رو انجام داد نتیجه رو به Transaction Manager اطلاع میده. اگر همه سرویس ها خبر موفقیت آمیز بودن رو ارسال کنن به Transaction Manger حالا Transactin Manager به همشون میگه برید کامیت نهایی این آی دی رو انجام بدین. حالا اگر یکی هم خطا انجام بده مدیر تراکنش به همه میگه رول بک کنید. 

معایب این روش:
بسیاری از دیتابیس ها و صف ها مثل کافکا و اینا این قابلیت رو پشتیبانی نمیکنن
دسترس پذیری میاد پایین چون ممکنه در لحظه یکی از سرویس ها پایین باشن. در این صورت سیستم نمیتونه کار کنه. این نکته با تئوری CAP هم همخوانی داره چون میخواد C رو داشته باشه (در هر لحظه بروز ترین نسخه داده) ولی A رو کم میکنه. در صورتی که همه سیستم ها A براشون مهم تر هست و میگن حالا آخرین نسخه داده رو با یک روز تاخیر هم دادی اشکال نداره. که این روش A رو نداره. 


روش SAGA
اگر فرآیند قراره در چند سرویس مختلف انجام بشه بیاید اون فرآیند رو در قالب تراکنش لوکال انجام بدیم. مثلا یک سرویس یک تراکنش لوکال انجام میده نتیجه رو میده به سرویس بعدی. مثلا یکی میاد یه کالایی رو سفارش میده. سرویس ثبت سفارش اون سفارش رو حالت Pending میکنه. میره دست سرویس انبار. انبار چک میکنه کالا رو داره. پس اون کالا رو قفل میکنه تا کس دیگه نتونه بیاد بگیرتش پس اون هم میره حالت Pending بعد میره سرویس حمل و نقل. میبینه طرف در محدوده هست ولی براش ارسال ثبت نمیکنه و اون هم حالت Pending میمونه بعد میره سرویس پرداخت. پرداخت که با موفقیت انجام شد دوباره برمیگرده از اول همه سرویس هایی که در حالت Pending بودن به مرحله انجام شده وضعیت رو تغییر میدن. 
همه پیام ها به طور Async توسط بروکر انجام میشه. در نتیجه A میره بالا. 
همون طور که گفتیم ایزولیشن رو نداریم در این روش. مثلا اگر همزمان یک یک نفر داره سفارشش بررسی میشه یکی دیگه بیاد بپرسه کالا رو دارین یا نه ما میگیم نداریم در صورتی که اون سفارش هنوز تایید نهایی نشده و ما اون کالا رو داریم ولی میگیم نداریم. پس دو تراکنش تاثیر مخرب رو هم میذارن .

در هر کدوم از این سرویس ها ممکنه fail داشته باشیم. در این صورت باید ماکنیستمی داشته باشیم که اگر یک fail انجام شد به همه سرویس ها اطلاع بدیم که rollback کنند. 

نکته ای که هست اینکه سرویس ها به ترتیب که حالت Pending قرار میگیرند به ترتیب برعکس باید از این حالت در بیان مثلا وقتی ما میریم سفر اول هتل رو رزرو میکنیم بعد ماشین رو رزرو میکنیم بعد هواپیما میگیریم حالا اگر هواپیما جا نداد ا